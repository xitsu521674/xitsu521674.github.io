window.__require=function e(t,r,o){function n(s,i){if(!r[s]){if(!t[s]){var c=s.split("/");if(c=c[c.length-1],!t[c]){var l="function"==typeof __require&&__require;if(!i&&l)return l(c,!0);if(a)return a(c,!0);throw new Error("Cannot find module '"+s+"'")}s=c}var u=r[s]={exports:{}};t[s][0].call(u.exports,function(e){return n(t[s][1][e]||e)},u,u.exports,e,t,r,o)}return r[s].exports}for(var a="function"==typeof __require&&__require,s=0;s<o.length;s++)n(o[s]);return n}({Game:[function(e,t,r){"use strict";cc._RF.push(t,"f2c552OxK9PlpnpCk2oSPyX","Game");var o=this&&this.__extends||function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function o(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}(),n=this&&this.__decorate||function(e,t,r,o){var n,a=arguments.length,s=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,r):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,o);else for(var i=e.length-1;i>=0;i--)(n=e[i])&&(s=(a<3?n(s):a>3?n(t,r,s):n(t,r))||s);return a>3&&s&&Object.defineProperty(t,r,s),s};Object.defineProperty(r,"__esModule",{value:!0});var a=e("./Net"),s=cc._decorator,i=s.ccclass,c=s.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.urleditbox=null,t.urlconfirmbtn=null,t.nameeditbox=null,t.nameconfirmbtn=null,t.connectionSign=null,t.roomprefab=null,t.roomfather=null,t.cam=null,t.createRoomBtn=null,t.createRoomName=null,t.gameroom=null,t.message=null,t.handfather=null,t.headfather=null,t.bodyfather=null,t.tailfather=null,t.cardsprites=null,t.waitforcardmsg=null,t.countdown=null,t.player1=null,t.player2=null,t.player3=null,t.you=null,t.yourate=null,t.playerrate1=null,t.playerrate2=null,t.playerrate3=null,t.firstslicestatus=null,t.secondslicestatus=null,t.thirdslicestatus=null,t.waitforplaymsg=null,t.leavebtnA=null,t.leavebtnB=null,t.youplaystatus=null,t.p1playtatus=null,t.p2playtatus=null,t.p3playtatus=null,t.ns=null,t.username=null,t.curRoomNum=null,t.sendcard=[],t.allcountbookmark=[],t.realhand=[],t}return o(t,e),t.prototype.onLoad=function(){var e=this;this.leavebtnA.on(cc.Node.EventType.MOUSE_DOWN,function(){e.ns.websocket.send(JSON.stringify({Type:"exit.room"}));for(var t=0;t<e.allcountbookmark.length;++t)clearInterval(e.allcountbookmark[t]),clearTimeout(e.allcountbookmark[t]);e.leavebtnA.active=!1,e.countdown.node.active=!1,e.lounge()},this),this.leavebtnB.on(cc.Node.EventType.MOUSE_DOWN,function(){e.ns.websocket.send(JSON.stringify({Type:"exit.room"}));for(var t=0;t<e.allcountbookmark.length;++t)clearInterval(e.allcountbookmark[t]),clearTimeout(e.allcountbookmark[t]);e.leavebtnB.active=!1,e.countdown.node.active=!1,e.lounge()},this),this.login().then(function(t){cc.log(t),e.lounge()})},t.prototype.login=function(){var e=this;return new Promise(function(t,r){e.urlconfirmbtn.on(cc.Node.EventType.MOUSE_DOWN,function(){e.ns=new a.NetSystem,e.ns.connectionStatus=0,e.connectionSign.color=cc.Color.YELLOW,e.ns.initNetSystem(e.urleditbox.string);var t=setInterval(function(){0!=e.ns.connectionStatus&&(1==e.ns.connectionStatus?e.connectionSign.color=cc.Color.GREEN:-1==e.ns.connectionStatus&&(e.connectionSign.color=cc.Color.RED),clearInterval(t))},100)},e),e.nameconfirmbtn.on(cc.Node.EventType.MOUSE_DOWN,function(){if(e.username=e.nameeditbox.string,1==e.ns.connectionStatus){var r={Type:"join.lobby",Name:e.username};e.ns.websocket.send(JSON.stringify(r)),t("")}},e)})},t.prototype.lounge=function(){var e=this;this.createRoomBtn.on(cc.Node.EventType.MOUSE_DOWN,function(){var t={Type:"join.room",Name:e.createRoomName.string};e.ns.websocket.send(JSON.stringify(t));var r=setInterval(function(){2==e.ns.LocationMessage.Location&&(clearInterval(r),e.PlayRoom())},500)},this),this.cam.position=cc.v3(3e3,0);setInterval(function(){var t=e.ns.RoomMessage.Rooms;if(void 0!=typeof t){var r=t.length;e.roomfather.removeAllChildren();for(var o=function(r){var o=cc.instantiate(e.roomprefab);o.setParent(e.roomfather),o.setPosition(0,-80*r-50),o.getComponent("room").setStatus(t[r].Name,t[r].Players),o.on(cc.Node.EventType.MOUSE_DOWN,function(){var o={Type:"join.room",Name:t[r].Name};e.ns.websocket.send(JSON.stringify(o));var n=setInterval(function(){2==e.ns.LocationMessage.Location&&(clearInterval(n),e.PlayRoom())},500)},e)},n=0;n<r;n++)o(n)}},2e3)},t.prototype.PlayRoom=function(){var e=this;this.leavebtnA.active=!0,this.cam.position=cc.v3(9e3,0,0);for(var t,r=this.ns.LocationMessage.Name,o=0;o<this.ns.RoomMessage.Rooms.length;++o)if(this.ns.RoomMessage.Rooms[o].Name==r){t=o,this.curRoomNum=t;break}this.message.active=!0;var n=setInterval(function(){for(var r=0,o=0,a=0;a<e.ns.RoomMessage.Rooms[t].Players.length;++a)""!=e.ns.RoomMessage.Rooms[t].Players[a]&&r++,e.ns.RoomMessage.Rooms[t].Players[a]!=e.username&&(0==o?e.player1.string=e.ns.RoomMessage.Rooms[t].Players[a]:1==o?e.player2.string=e.ns.RoomMessage.Rooms[t].Players[a]:2==o&&(e.player3.string=e.ns.RoomMessage.Rooms[t].Players[a]),o++);if(4==r){e.message.active=!1,clearInterval(n),e.waitforcardmsg.active=!0;var s=setInterval(function(){if(null!=e.ns.CardMessage){clearInterval(s);var t=setTimeout(function(){e.waitforcardmsg.active=!1,e.Game()},1e3);e.allcountbookmark.push(t)}},500);e.allcountbookmark.push(s)}},500);this.allcountbookmark.push(n)},t.prototype.setCard=function(e,t,r,o,n){var a=this;this.handfather.removeAllChildren();var s=-455;s+=(13-e.length)/2*80;for(var i=function(i){var l=new cc.Node;l.setParent(c.handfather),l.height=94,l.width=68,l.setPosition(s+80*i,0),l.addComponent(cc.Sprite),l.getComponent(cc.Sprite).spriteFrame=c.cardsprites.getSpriteFrame(e[i]+1),l.addComponent(cc.BlockInputEvents),l.on(cc.Node.EventType.MOUSE_DOWN,function(){if(-1==n.indexOf(e[i])?(cc.tween(l).by(.1,{position:cc.v3(0,50,0)}).start(),n.push(e[i])):(cc.tween(l).by(.1,{position:cc.v3(0,-50,0)}).start(),n=n.filter(function(t){return t!=e[i]})),0==t.length&&3==n.length){t=n.filter(function(){return!0}),e=e.filter(function(e){for(var t=0;t<n.length;++t)if(e==n[t])return!1;return!0}),a.realhand=e,n=[];for(var s=[],c=0;c<13;++c)for(var u=0;u<4;++u)for(var p=0;p<t.length;++p)t[p]%13==c&&Math.floor(t[p]/13)==u&&s.push(t[p]);t=s,a.sendcard.splice(0,3,t[0],t[1],t[2]),a.firstslicestatus.string=""+a.calculateScore(t)[1],a.setCard(e,t,r,o,n)}else if(3==t.length&&0==r.length&&5==n.length){r=n.filter(function(){return!0}),e=e.filter(function(e){for(var t=0;t<n.length;++t)if(e==n[t])return!1;return!0}),n=[],a.realhand=e;for(var d=[],f=0;f<13;++f)for(u=0;u<4;++u)for(p=0;p<r.length;++p)r[p]%13==f&&Math.floor(r[p]/13)==u&&d.push(r[p]);r=d,a.sendcard.splice(3,5,r[0],r[1],r[2],r[3],r[4]),a.secondslicestatus.string=""+a.calculateScore(r)[1],a.setCard(e,t,r,o,n)}else if(3==t.length&&5==r.length&&5==n.length){o=n.filter(function(){return!0}),e=e.filter(function(e){for(var t=0;t<n.length;++t)if(e==n[t])return!1;return!0}),n=[],a.realhand=e;for(var h=[],v=0;v<13;++v)for(u=0;u<4;++u)for(p=0;p<o.length;++p)o[p]%13==v&&Math.floor(o[p]/13)==u&&h.push(o[p]);o=h,a.sendcard.splice(8,5,o[0],o[1],o[2],o[3],o[4]),a.thirdslicestatus.string=""+a.calculateScore(o)[1],a.setCard(e,t,r,o,n)}},c)},c=this,l=0;l<e.length;++l)i(l);this.headfather.removeAllChildren();for(l=0;l<t.length;++l){(u=new cc.Node).height=94,u.width=68,u.setParent(this.headfather),u.setPosition(94*l-94,0),u.addComponent(cc.Sprite),u.getComponent(cc.Sprite).spriteFrame=this.cardsprites.getSpriteFrame(t[l]+1),u.on(cc.Node.EventType.MOUSE_DOWN,function(){a.headfather.removeAllChildren();for(var s=0;s<t.length;++s)e.push(t[s]);t=[],a.sendcard.splice(0,3,-1,-1,-1);for(var i=[],c=0;c<13;++c)for(var l=0;l<4;++l)for(var u=0;u<e.length;++u)e[u]%13==c&&Math.floor(e[u]/13)==l&&i.push(e[u]);e=i,a.realhand=e,a.setCard(e,t,r,o,n),a.firstslicestatus.string=""},this)}this.bodyfather.removeAllChildren();for(l=0;l<r.length;++l){(u=new cc.Node).height=94,u.width=68,u.setParent(this.bodyfather),u.setPosition(94*l-188,0),u.addComponent(cc.Sprite),u.getComponent(cc.Sprite).spriteFrame=this.cardsprites.getSpriteFrame(r[l]+1),u.on(cc.Node.EventType.MOUSE_DOWN,function(){a.bodyfather.removeAllChildren();for(var s=0;s<r.length;++s)e.push(r[s]);r=[],a.sendcard.splice(3,5,-1,-1,-1,-1,-1);for(var i=[],c=0;c<13;++c)for(var l=0;l<4;++l)for(var u=0;u<e.length;++u)e[u]%13==c&&Math.floor(e[u]/13)==l&&i.push(e[u]);e=i,a.realhand=e,a.setCard(e,t,r,o,n),a.secondslicestatus.string=""},this)}this.tailfather.removeAllChildren();for(l=0;l<o.length;++l){var u;(u=new cc.Node).height=94,u.width=68,u.setParent(this.tailfather),u.setPosition(94*l-188,0),u.addComponent(cc.Sprite),u.getComponent(cc.Sprite).spriteFrame=this.cardsprites.getSpriteFrame(o[l]+1),u.on(cc.Node.EventType.MOUSE_DOWN,function(){a.tailfather.removeAllChildren();for(var s=0;s<o.length;++s)e.push(o[s]);o=[],a.sendcard.splice(8,5,-1,-1,-1,-1,-1);for(var i=[],c=0;c<13;++c)for(var l=0;l<4;++l)for(var u=0;u<e.length;++u)e[u]%13==c&&Math.floor(e[u]/13)==l&&i.push(e[u]);e=i,a.realhand=e,a.setCard(e,t,r,o,n),a.thirdslicestatus.string=""},this)}},t.prototype.Game=function(){var e,t=this;this.leavebtnB.active=!0,this.cam.position=cc.v3(6e3,0,0),cc.log("\u904a\u6232\u958b\u59cb");for(var r=0;r<13;++r)this.sendcard[r]=-1;this.playerrate1.string="",this.playerrate2.string="",this.playerrate3.string="",this.yourate.string="",this.firstslicestatus.string="",this.secondslicestatus.string="",this.thirdslicestatus.string="";for(r=0;r<4;++r)if(this.ns.RoomMessage.Rooms[this.curRoomNum].Players[r]==this.username){e=r;break}cc.log("\u73a9\u5bb6\u7de8\u865f "+e),this.realhand=this.ns.CardMessage.Cards[e];var o=[],n=[],a=[],s=[];for(r=0;r<13;++r)for(var i=0;i<4;++i)for(var c=0;c<this.realhand.length;++c)this.realhand[c]%13==r&&Math.floor(this.realhand[c]/13)==i&&s.push(this.realhand[c]);var l=[];for(r=0;r<13;++r)for(i=0;i<4;++i)for(c=0;c<o.length;++c)o[c]%13==r&&Math.floor(o[c]/13)==i&&l.push(o[c]);var u=[];for(r=0;r<13;++r)for(i=0;i<4;++i)for(c=0;c<n.length;++c)n[c]%13==r&&Math.floor(n[c]/13)==i&&u.push(n[c]);var p=[];for(r=0;r<13;++r)for(i=0;i<4;++i)for(c=0;c<a.length;++c)a[c]%13==r&&Math.floor(a[c]/13)==i&&p.push(a[c]);this.setCard(s,l,u,p,[]);var d=25;this.countdown.string="25",this.countdown.node.active=!0;var f=setInterval(function(){if(d--,t.countdown.string=""+d,0==d){clearInterval(f);for(var r=0;r<t.realhand.length;r++)for(var o=0;o<t.sendcard.length;++o)if(-1==t.sendcard[o]){t.sendcard[o]=t.realhand[r];break}t.setCard([],t.sendcard.slice(0,3),t.sendcard.slice(3,8),t.sendcard.slice(8,13),[]),t.firstslicestatus.string=""+t.calculateScore(t.sendcard.slice(0,3))[1],t.secondslicestatus.string=""+t.calculateScore(t.sendcard.slice(3,8))[1],t.thirdslicestatus.string=""+t.calculateScore(t.sendcard.slice(8,13))[1];var n={Type:"set.card",Cards:t.sendcard};t.ns.websocket.send(JSON.stringify(n)),cc.log("\u767c\u9001\u5361\u7247"),cc.log(t.sendcard),t.waitforplaymsg.active=!0,t.countdown.node.active=!1;var a=setInterval(function(){for(var r=0,o=0;o<t.ns.CardMessage.Cards.length;++o)-1!=t.ns.CardMessage.Cards[o][0]&&r++;4==r&&(cc.log("\u958b\u724c"),clearInterval(a),t.waitforplaymsg.active=!1,t.playcard(e))},500);t.allcountbookmark.push(a)}},1e3);this.allcountbookmark.push(f)},t.prototype.playcard=function(e){var t=this;this.cam.position=cc.v3(9e3,0,0),this.youplaystatus.node.parent.active=!0,this.p1playtatus.node.parent.active=!0,this.p2playtatus.node.parent.active=!0,this.p3playtatus.node.parent.active=!0;var r=[0,1,2,3];r=r.filter(function(t){return t!=e});var o=[],n=[],a=[13,1,2,3,4,5,6,7,8,9,10,11,12],s=[this.player1,this.player2,this.player3],i=[this.playerrate1,this.playerrate2,this.playerrate3],c=[this.p1playtatus,this.p2playtatus,this.p3playtatus];cc.log("\u770b\u724c");for(var l=0;l<this.ns.CardMessage.Cards.length;++l){var u=this.ns.CardMessage.Cards[l].slice(0,3),p=this.calculateScore(u);o[l]=p[0],n[l]=p[1]}var d=0;for(l=0;l<o.length;++l)d=Math.max(d,o[l]);for(l=0;l<o.length;++l)for(var f=0;f<o.length;++f)if(l!=f&&o[l]==o[f]&&o[l]==d){var h=this.ns.CardMessage.Cards[l].slice(0,3),v=this.ns.CardMessage.Cards[f].slice(0,3);h.sort(function(e,t){return e-t}),v.sort(function(e,t){return e-t});for(var g=0;g<h.length;++g){if(a[h[g]]>a[v[g]]){o[f]--;break}if(a[h[g]]<a[v[g]]){o[l]--;break}}}o[e]==d?(this.yourate.node.color=cc.Color.YELLOW,this.yourate.string="\u8d0f"):(this.yourate.node.color=cc.Color.RED,this.yourate.string="\u8f38"),this.youplaystatus.string=" "+n[e];for(l=0;l<3;++l)o[r[l]]==d?(i[l].node.color=cc.Color.YELLOW,i[l].string="\u8d0f"):(i[l].node.color=cc.Color.RED,i[l].string="\u8f38"),c[l].string=" "+n[r[l]];for(l=0;l<3;++l){(y=new cc.Node).height=80,y.width=61,y.addComponent(cc.Sprite),y.getComponent(cc.Sprite).spriteFrame=this.cardsprites.getSpriteFrame(this.ns.CardMessage.Cards[e][l]+1),y.setParent(this.you.node),y.position=cc.v3(80*l-80,-95)}for(l=0;l<r.length;++l)for(f=0;f<3;++f){var y;(y=new cc.Node).height=80,y.width=61,y.addComponent(cc.Sprite),y.getComponent(cc.Sprite).spriteFrame=this.cardsprites.getSpriteFrame(this.ns.CardMessage.Cards[r[l]][f]+1),y.setParent(s[l].node),y.position=cc.v3(80*f-80,-95)}var m=setTimeout(function(){for(var l=0;l<t.ns.CardMessage.Cards.length;++l){var u=t.ns.CardMessage.Cards[l].slice(3,8),p=t.calculateScore(u);o[l]=p[0],n[l]=p[1]}var d=0;for(l=0;l<o.length;++l)d=Math.max(d,o[l]);for(l=0;l<o.length;++l)for(var f=0;f<o.length;++f)if(l!=f&&o[l]==o[f]&&o[l]==d){var h=t.ns.CardMessage.Cards[l].slice(3,8),v=t.ns.CardMessage.Cards[f].slice(3,8);h.sort(function(e,t){return e-t}),v.sort(function(e,t){return e-t});for(var g=0;g<h.length;++g){if(a[h[g]]>a[v[g]]){o[f]--;break}if(a[h[g]]<a[v[g]]){o[l]--;break}}}o[e]==d?(t.yourate.node.color=cc.Color.YELLOW,t.yourate.string="\u8d0f"):(t.yourate.node.color=cc.Color.RED,t.yourate.string="\u8f38"),t.youplaystatus.string=" "+n[e];for(l=0;l<3;++l)o[r[l]]==d?(i[l].node.color=cc.Color.YELLOW,i[l].string="\u8d0f"):(i[l].node.color=cc.Color.RED,i[l].string="\u8f38"),c[l].string=" "+n[r[l]];t.you.node.removeAllChildren();for(l=0;l<5;++l){(y=new cc.Node).height=80,y.width=61,y.addComponent(cc.Sprite),y.getComponent(cc.Sprite).spriteFrame=t.cardsprites.getSpriteFrame(t.ns.CardMessage.Cards[e][l+3]+1),y.setParent(t.you.node),y.position=cc.v3(80*l-160,-95)}for(l=0;l<r.length;++l){s[l].node.removeAllChildren();for(f=0;f<5;++f){var y;(y=new cc.Node).height=80,y.width=61,y.addComponent(cc.Sprite),y.getComponent(cc.Sprite).spriteFrame=t.cardsprites.getSpriteFrame(t.ns.CardMessage.Cards[r[l]][f+3]+1),y.setParent(s[l].node),y.position=cc.v3(80*f-160,-95)}}},3e3),b=setTimeout(function(){for(var l=0;l<t.ns.CardMessage.Cards.length;++l){var u=t.ns.CardMessage.Cards[l].slice(8,13),p=t.calculateScore(u);o[l]=p[0],n[l]=p[1]}var d=0;for(l=0;l<o.length;++l)d=Math.max(d,o[l]);for(l=0;l<o.length;++l)for(var f=0;f<o.length;++f)if(l!=f&&o[l]==o[f]&&o[l]==d){var h=t.ns.CardMessage.Cards[l].slice(8,13),v=t.ns.CardMessage.Cards[f].slice(8,13);h.sort(function(e,t){return e-t}),v.sort(function(e,t){return e-t});for(var g=0;g<h.length;++g){if(a[h[g]]>a[v[g]]){o[f]--;break}if(a[h[g]]<a[v[g]]){o[l]--;break}}}o[e]==d?(t.yourate.node.color=cc.Color.YELLOW,t.yourate.string="\u8d0f"):(t.yourate.node.color=cc.Color.RED,t.yourate.string="\u8f38"),t.youplaystatus.string=" "+n[e];for(l=0;l<3;++l)o[r[l]]==d?(i[l].node.color=cc.Color.YELLOW,i[l].string="\u8d0f"):(i[l].node.color=cc.Color.RED,i[l].string="\u8f38"),c[l].string=" "+n[r[l]];t.you.node.removeAllChildren();for(l=0;l<5;++l){(y=new cc.Node).height=80,y.width=61,y.addComponent(cc.Sprite),y.getComponent(cc.Sprite).spriteFrame=t.cardsprites.getSpriteFrame(t.ns.CardMessage.Cards[e][l+8]+1),y.setParent(t.you.node),y.position=cc.v3(80*l-160,-95)}for(l=0;l<r.length;++l){s[l].node.removeAllChildren();for(f=0;f<5;++f){var y;(y=new cc.Node).height=80,y.width=61,y.addComponent(cc.Sprite),y.getComponent(cc.Sprite).spriteFrame=t.cardsprites.getSpriteFrame(t.ns.CardMessage.Cards[r[l]][f+8]+1),y.setParent(s[l].node),y.position=cc.v3(80*f-160,-95)}}},6e3),C=setTimeout(function(){t.yourate.string="",t.youplaystatus.string="";for(var e=0;e<i.length;++e)i[e].string="",c[e].string="";t.you.node.removeAllChildren();for(e=0;e<s.length;++e)s[e].node.removeAllChildren();t.youplaystatus.node.parent.active=!1,t.p1playtatus.node.parent.active=!1,t.p2playtatus.node.parent.active=!1,t.p3playtatus.node.parent.active=!1,t.ns.CardMessage=null,t.PlayRoom()},9e3);this.allcountbookmark.push(m),this.allcountbookmark.push(b),this.allcountbookmark.push(C)},t.prototype.calculateScore=function(e){for(var t=0,r=[0,0,0,0],o=[0,0,0,0,0,0,0,0,0,0,0,0,0],n=!1,a=!1,s=0,i=0,c=0;c<e.length;++c)r[Math.floor(e[c]/13)]++,o[e[c]%13]++;if(5==e.length){for(c=0;c<9;){for(var l=0,u=c;u<c+5;++u,++c){if(0==o[u]){++c;break}l++}5==l&&(n=!0)}for(c=0;c<r.length;++c)if(5==r[c]){a=!0;break}}if(0!=o[0])i=0;else for(c=0;c<o.length;++c)0!=o[c]&&(i=c);if(t+=[12,0,1,2,3,4,5,6,7,8,9,10,11][i],n&&a)return[t+=104,"\u540c\u82b1\u9806"];for(c=0;c<o.length;++c)s=Math.max(s,o[c]);if(4==s)return[t+=91,"\u9435\u652f"];if(3==s)for(c=0;c<o.length;++c)if(2==o[c])return[t+=78,"\u846b\u8606"];if(a)return[t+=65,"\u540c\u82b1"];if(n)return[t+=52,"\u9806\u5b50"];if(3==s)return[t+=39,"\u4e09\u689d"];if(2==s){var p=0;for(c=0;c<o.length;++c)2==o[c]&&p++;if(2==p)return[t+=26,"\u5169\u5c0d"];if(1==p)return[t+=13,"\u4e00\u5c0d"]}return[t,"\u6563\u724c"]},n([c(cc.EditBox)],t.prototype,"urleditbox",void 0),n([c(cc.Node)],t.prototype,"urlconfirmbtn",void 0),n([c(cc.EditBox)],t.prototype,"nameeditbox",void 0),n([c(cc.Node)],t.prototype,"nameconfirmbtn",void 0),n([c(cc.Node)],t.prototype,"connectionSign",void 0),n([c(cc.Prefab)],t.prototype,"roomprefab",void 0),n([c(cc.Node)],t.prototype,"roomfather",void 0),n([c(cc.Node)],t.prototype,"cam",void 0),n([c(cc.Node)],t.prototype,"createRoomBtn",void 0),n([c(cc.EditBox)],t.prototype,"createRoomName",void 0),n([c(cc.Node)],t.prototype,"gameroom",void 0),n([c(cc.Node)],t.prototype,"message",void 0),n([c(cc.Node)],t.prototype,"handfather",void 0),n([c(cc.Node)],t.prototype,"headfather",void 0),n([c(cc.Node)],t.prototype,"bodyfather",void 0),n([c(cc.Node)],t.prototype,"tailfather",void 0),n([c(cc.SpriteAtlas)],t.prototype,"cardsprites",void 0),n([c(cc.Node)],t.prototype,"waitforcardmsg",void 0),n([c(cc.Label)],t.prototype,"countdown",void 0),n([c(cc.Label)],t.prototype,"player1",void 0),n([c(cc.Label)],t.prototype,"player2",void 0),n([c(cc.Label)],t.prototype,"player3",void 0),n([c(cc.Label)],t.prototype,"you",void 0),n([c(cc.Label)],t.prototype,"yourate",void 0),n([c(cc.Label)],t.prototype,"playerrate1",void 0),n([c(cc.Label)],t.prototype,"playerrate2",void 0),n([c(cc.Label)],t.prototype,"playerrate3",void 0),n([c(cc.Label)],t.prototype,"firstslicestatus",void 0),n([c(cc.Label)],t.prototype,"secondslicestatus",void 0),n([c(cc.Label)],t.prototype,"thirdslicestatus",void 0),n([c(cc.Node)],t.prototype,"waitforplaymsg",void 0),n([c(cc.Node)],t.prototype,"leavebtnA",void 0),n([c(cc.Node)],t.prototype,"leavebtnB",void 0),n([c(cc.Label)],t.prototype,"youplaystatus",void 0),n([c(cc.Label)],t.prototype,"p1playtatus",void 0),n([c(cc.Label)],t.prototype,"p2playtatus",void 0),n([c(cc.Label)],t.prototype,"p3playtatus",void 0),t=n([i],t)}(cc.Component);r.default=l,cc._RF.pop()},{"./Net":"Net"}],Net:[function(e,t,r){"use strict";cc._RF.push(t,"7aa81k0LOZFpZsU/zhX5dMw","Net");var o=this&&this.__awaiter||function(e,t,r,o){function n(e){return e instanceof r?e:new r(function(t){t(e)})}return new(r||(r=Promise))(function(r,a){function s(e){try{c(o.next(e))}catch(e){a(e)}}function i(e){try{c(o.throw(e))}catch(e){a(e)}}function c(e){e.done?r(e.value):n(e.value).then(s,i)}c((o=o.apply(e,t||[])).next())})},n=this&&this.__generator||function(e,t){var r,o,n,a,s={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return a={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function i(e){return function(t){return c([e,t])}}function c(a){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(n=2&a[0]?o.return:a[0]?o.throw||((n=o.return)&&n.call(o),0):o.next)&&!(n=n.call(o,a[1])).done)return n;switch(o=0,n&&(a=[2&a[0],n.value]),a[0]){case 0:case 1:n=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,o=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!(n=(n=s.trys).length>0&&n[n.length-1])&&(6===a[0]||2===a[0])){s=0;continue}if(3===a[0]&&(!n||a[1]>n[0]&&a[1]<n[3])){s.label=a[1];break}if(6===a[0]&&s.label<n[1]){s.label=n[1],n=a;break}if(n&&s.label<n[2]){s.label=n[2],s.ops.push(a);break}n[2]&&s.ops.pop(),s.trys.pop();continue}a=t.call(e,s)}catch(e){a=[6,e],o=0}finally{r=n=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(r,"__esModule",{value:!0}),r.NetSystem=void 0;var a=function(){function e(){this.websocket=null,this.LocationMessage=null,this.RoomMessage=null,this.CardMessage=null,this.connectionStatus=0}return e.prototype.createConnection=function(e){var t=this;return new Promise(function(r,o){t.websocket=new WebSocket("wss://"+e);var n=setTimeout(function(){o("\u9023\u7dda\u903e\u6642")},5e3);t.websocket.onopen=function(){cc.log("\u9023\u7dda\u6210\u529f"),clearTimeout(n),r("\u9023\u63a5\u6210\u529f")},t.websocket.onerror=function(){clearTimeout(n),o("\u9023\u7dda\u767c\u751f\u932f\u8aa4 \u53ef\u80fd\u662f\u4f3a\u670d\u5668\u4e0d\u5728\u7dda\u4e0a?")}})},e.prototype.startReceiveMessage=function(){var e=this;this.websocket.onmessage=function(t){var r=JSON.parse(t.data);switch(cc.log(r),r.Type){case"LocationMsg":e.LocationMessage=JSON.parse(JSON.stringify(r));break;case"RoomMsg":e.RoomMessage=JSON.parse(JSON.stringify(r));break;case"CardMsg":e.CardMessage=JSON.parse(JSON.stringify(r))}}},e.prototype.initNetSystem=function(e){return o(this,void 0,void 0,function(){var t=this;return n(this,function(r){switch(r.label){case 0:return[4,this.createConnection(e).then(function(){t.connectionStatus=1,t.startReceiveMessage()}).catch(function(e){t.connectionStatus=-1,cc.log(e)})];case 1:return r.sent(),[2]}})})},e}();r.NetSystem=a,cc._RF.pop()},{}],room:[function(e,t,r){"use strict";cc._RF.push(t,"ae8d3s6U8dAHo+5do1db395","room");var o=this&&this.__extends||function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function o(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}(),n=this&&this.__decorate||function(e,t,r,o){var n,a=arguments.length,s=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,r):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,o);else for(var i=e.length-1;i>=0;i--)(n=e[i])&&(s=(a<3?n(s):a>3?n(t,r,s):n(t,r))||s);return a>3&&s&&Object.defineProperty(t,r,s),s};Object.defineProperty(r,"__esModule",{value:!0});var a=cc._decorator,s=a.ccclass,i=a.property,c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.roomname=null,t.playernum=null,t.playerlsit=null,t}return o(t,e),t.prototype.setStatus=function(e,t){this.roomname.string=e;var r=0;t.forEach(function(e){""!=e&&r++}),this.playernum.string=r+"/4";for(var o=0;o<t.length;++o)this.playerlsit.string+=t[o]+"  "},n([i(cc.Label)],t.prototype,"roomname",void 0),n([i(cc.Label)],t.prototype,"playernum",void 0),n([i(cc.Label)],t.prototype,"playerlsit",void 0),t=n([s],t)}(cc.Component);r.default=c,cc._RF.pop()},{}]},{},["Game","Net","room"]);